---
const navItems = [
  {
    title: 'Experiencia',
    url: '/#experiencia'
  },
  {
    title: 'Proyectos',
    url: '/#proyectos'
  },
  {
    title: 'Sobre m√≠',
    url: '/#sobre-mi'
  },
  {
    title: 'Contacto',
    url: '/#contacto'
  },
]
---

<header
  class={`
    flex justify-center items-center
    mx-auto
    py-5
    sticky top-0
    w-full xl:w-[1120px]
    z-10
  `}
>
  <nav class={` border border-black rounded-full px-3 py-1 flex flex-row items-center bg-[#11111a] dark:bg-black/50 backdrop-blur-2xl  text-white`}>
  {navItems.map(link => (
    <a
      class="hover:bg-white/10 rounded-full px-2 sm:px-3 transition text-sm sm:text-base"
      href={link.url}>{link.title}</a>
  ))}
  </nav>
</header>

<script>
  const $navAElements: Element[] = [...document.querySelectorAll('header nav a')];

window.addEventListener('scroll', () => {
  $navAElements.forEach(a => {
    const selectionForSection = a.getAttribute('href')?.substring(1);
    const sectionElement: HTMLDivElement | null = document.querySelector(selectionForSection || '');

    if (!sectionElement) return;

    const selectionTop = sectionElement.offsetTop;
    const selectionBottom = selectionTop + sectionElement.offsetHeight;

    if (window.scrollY >= selectionTop && window.scrollY < selectionBottom) {
      $navAElements.forEach(aToRemove => aToRemove.classList.remove('bg-white/15'));
      a.classList.add('bg-white/15');
    }
  });
});

  </script>
